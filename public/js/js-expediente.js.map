{"version":3,"sources":["js-expediente.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"js-expediente.js","sourcesContent":["$(\".col-hide\").on(\"click\", function () {\r\n    var id = $(this).attr('id');\r\n    $(this).prop(\"checked\") ? $('.'+id).show() : $('.'+id).hide();\r\n});\r\n\r\n\r\n/* AJUSTES */\r\n$(\"#ajustes-expediente\").on(\"click\", function() {\r\n    $(\"#ajustes-expediente-panel\").slideToggle();\r\n});\r\n\r\n$(\"#ajustes-expediente-cancelar\").on(\"click\", function() {\r\n    $(\"#ajustes-expediente-panel\").slideUp();\r\n});\r\n\r\n\r\n//MOSTRAR U OCULTAR COLUMNAS DE LA TABLA EXPEDIENTE\r\nvar ajustes = $(\"#expediente-ajustes-data\").text();\r\nvar js = JSON.parse(ajustes);\r\n\r\ngetValues(js,'ch-expediente') == 1 ? $('.col-expediente').show() : $('.col-expediente').hide();\r\ngetValues(js,'ch-cliente') == 1 ? $('.col-cliente').show() : $('.col-cliente').hide();\r\ngetValues(js,'ch-moneda') == 1 ? $('.col-moneda').show() : $('.col-moneda').hide();\r\ngetValues(js,'ch-valor') == 1 ? $('.col-valor').show() : $('.col-valor').hide();\r\ngetValues(js,'ch-tarifa') == 1 ? $('.col-tarifa').show() : $('.col-tarifa').hide();\r\ngetValues(js,'ch-abogado') == 1 ? $('.col-abogado').show() : $('.col-abogado').hide();\r\ngetValues(js,'ch-asistente') == 1 ? $('.col-asistente').show() : $('.col-asistente').hide();\r\ngetValues(js,'ch-servicio') == 1 ? $('.col-servicio').show() : $('.col-servicio').hide();\r\ngetValues(js,'ch-fecha-inicio') == 1 ? $('.col-fecha-inicio').show() : $('.col-fecha-inicio').hide();\r\ngetValues(js,'ch-fecha-termino') == 1 ? $('.col-fecha-termino').show() : $('.col-fecha-termino').hide();\r\ngetValues(js,'ch-materia') == 1 ? $('.col-materia').show() : $('.col-materia').hide();\r\ngetValues(js,'ch-entidad') == 1 ? $('.col-entidad').show() : $('.col-entidad').hide();\r\ngetValues(js,'ch-instancia') == 1 ? $('.col-instancia').show() : $('.col-instancia').hide();\r\ngetValues(js,'ch-encargado') == 1 ? $('.col-encargado').show() : $('.col-encargado').hide();\r\ngetValues(js,'ch-fecha-poder') == 1 ? $('.col-fecha-poder').show() : $('.col-fecha-poder').hide();\r\ngetValues(js,'ch-fecha-vencimiento') == 1 ? $('.col-fecha-vencimiento').show() : $('.col-fecha-vencimiento').hide();\r\ngetValues(js,'ch-area') == 1 ? $('.col-area').show() : $('.col-area').hide();\r\ngetValues(js,'ch-jefe-area') == 1 ? $('.col-jefe-area').show() : $('.col-jefe-area').hide();\r\ngetValues(js,'ch-bienes') == 1 ? $('.col-bienes').show() : $('.col-bienes').hide();\r\ngetValues(js,'ch-situacion') == 1 ? $('.col-situacion').show() : $('.col-situacion').hide();\r\ngetValues(js,'ch-estado') == 1 ? $('.col-estado').show() : $('.col-estado').hide();\r\ngetValues(js,'ch-exito') == 1 ? $('.col-exito').show() : $('.col-exito').hide();\r\n\r\n\r\n/* FILTRAR */\r\n$(\"#filtrar-expediente\").on(\"click\", function() {\r\n    $(\"#filtrar-expediente-panel\").slideToggle();\r\n});\r\n\r\n$(\"#filtrar-expediente-cancelar\").on(\"click\", function() {\r\n    $(\"#filtrar-expediente-panel\").slideUp();\r\n});\r\n\r\n$(\".select2-clear\").on(\"click\", function(){\r\n    var id = $(this).data('id');\r\n    $(\".\" + id + \" .select2\").val(null).trigger('change');\r\n});\r\n\r\n$(\".text-clear\").on(\"click\", function(){\r\n    var id = $(this).data('id');\r\n    $(\".\" + id + \" .form-control\").val(null);\r\n});\r\n\r\n\r\n//MOSTRAR TAREAS DE EXPEDIENTE\r\n$(\".expediente-tareas\").on(\"click\", function(e) {\r\n    e.preventDefault();\r\n\r\n    var id = $(this).data('id');\r\n    var list = $(this).data('list');\r\n    var create = $(this).data('create');\r\n\r\n    $.ajax({\r\n        url: list,\r\n        type: 'GET',\r\n        success: function(result){\r\n\r\n            var html = '<tr id=\"tarea-'+id+'\" class=\"bg-default\" style=\"display:none;\">' +\r\n                    '<td style=\"padding:20px 15px;\" colspan=\"23\">' +\r\n                        '<div class=\"btn-group pull-left\">' +\r\n                            '<h3 class=\"table-title\">Tareas</h3>' +\r\n                        '</div>' +\r\n                        '<div class=\"btn-group pull-right table-botones\">' +\r\n                            '<a class=\"btn sbold white tarea-cerrar\" href=\"#\" data-id=\"'+id+'\"> Cerrar </a>' +\r\n                            '<a class=\"btn sbold blue-soft\" href=\"'+create+'\" data-target=\"#ajax\" data-toggle=\"modal\"> Agregar nuevo tarea <i class=\"fa fa-plus\"></i></a>' +\r\n                        '</div>' +\r\n                        '<table id=\"tarea-lista-'+id+'\" class=\"table table-striped table-bordered table-hover order-column\">' +\r\n                            '<thead>' +\r\n                                '<tr role=\"row\" class=\"heading\">' +\r\n                                    '<td class=\"text-center\">Solicitada</td>' +\r\n                                    '<td class=\"text-center\">Finalizado</td>' +\r\n                                    '<td>Tarea</td>' +\r\n                                    '<td>Descripción</td>' +\r\n                                    '<td>Asignado</td>' +\r\n                                    '<td class=\"text-center\">Tiempo</td>' +\r\n                                    '<td class=\"text-center\">Gastos</td>' +\r\n                                    '<td class=\"text-center\">Estado</td>' +\r\n                                    '<td></td>' +\r\n                                '</tr>' +\r\n                            '</thead>' +\r\n                            '<tbody></tbody>' +\r\n                        '</table>' +\r\n                    '</td>' +\r\n                '</tr>';\r\n\r\n            $(\"#exp-\" + id).after(html);\r\n            $(\"#tarea-\" + id).fadeIn();\r\n\r\n            var tr, descripcion, estado;\r\n\r\n            $.each(JSON.parse(result), function(idx, obj) {\r\n                descripcion = obj.descripcion;\r\n                estado = obj.estado_nombre;\r\n                tr = $('<tr id=\"tarea-select-'+ obj.id +'\">');\r\n                tr.append('<td class=\"text-center\">'+ obj.fecha_solicitada +'</td>');\r\n                tr.append('<td class=\"text-center\">'+ obj.fecha_vencimiento +'</td>');\r\n                tr.append('<td>'+ obj.titulo_tarea +'</td>');\r\n                tr.append('<td data-tooltip=\"'+ obj.descripcion +'\">'+ descripcion.substr(0,30) + \"...\" +'</td>');\r\n                tr.append('<td>'+ obj.asignado +'</td>');\r\n                tr.append('<td class=\"text-center\"><strong>'+ obj.tiempo_total +'</strong></td>');\r\n                tr.append('<td class=\"text-right\"><strong>S/ '+ obj.gastos +'</strong></td>');\r\n                tr.append('<td class=\"text-center\"><span class=\"estado-'+ estado.toLowerCase() +'\">'+ estado +'</span></td>');\r\n                tr.append('<td class=\"text-center\">' +\r\n                    '<div class=\"btn-group\">' +\r\n                        '<button class=\"btn btn-xs blue dropdown-toggle\" type=\"button\" data-toggle=\"dropdown\" aria-expanded=\"false\"> Movimientos' +\r\n                            '<i class=\"fa fa-angle-down\"></i>' +\r\n                        '</button>' +\r\n                        '<ul class=\"dropdown-menu pull-right\" role=\"menu\">' +\r\n                            '<li><a href=\"'+ obj.url_editar +'\" data-target=\"#ajax\" data-toggle=\"modal\">Editar</a></li>' +\r\n                            '<li><a href=\"#\" class=\"expediente-tarea-acciones-lista\" data-id=\"'+ obj.id +'\" ' +\r\n                                    'data-list=\"'+ obj.url_acciones_lista +'\" data-create=\"'+ obj.url_acciones_crear +'\">Acciones</a></li>' +\r\n                            '<li><a href=\"'+ obj.url_notificacion +'\" data-target=\"#ajax\" data-toggle=\"modal\">Notificaciones</a></li>' +\r\n                        '</ul>' +\r\n                    '</div>' +\r\n                    '</td></tr>');\r\n                $(\"#tarea-lista-\"+id+\" tbody\").append(tr);\r\n            });\r\n\r\n            tareaListaAcciones();\r\n\r\n            $(\".tarea-cerrar\").on(\"click\", function (e) {\r\n                e.preventDefault();\r\n                var id = $(this).data('id');\r\n                $(\"#tarea-\" + id).fadeOut();\r\n            });\r\n        },\r\n        beforeSend: function () { $('.progress').show(); },\r\n        complete: function () { $('.progress').hide(); },\r\n        error: function() {\r\n\r\n        }\r\n    });\r\n\r\n});\r\n\r\n\r\n\r\n\r\n//MOSTRAR FLUJO DE CAJA DE EXPEDIENTE\r\n$(\".expediente-caja\").on(\"click\", function(e) {\r\n    e.preventDefault();\r\n\r\n    var id = $(this).data('id');\r\n    var list = $(this).data('list');\r\n    var create = $(this).data('create');\r\n    var saldo = $(this).data('saldo');\r\n\r\n    $.ajax({\r\n        url: list,\r\n        type: 'GET',\r\n        success: function(result){\r\n            var html = '<tr id=\"caja-'+id+'\" class=\"bg-default\" style=\"display:none;\"><td style=\"padding:20px 15px;\" colspan=\"23\">' +\r\n                '<div class=\"row\">' +\r\n                    '<div class=\"col-md-3\">' +\r\n                    '<h3 class=\"table-title\">Flujo de Caja</h3>' +\r\n                    '</div>' +\r\n                    '<div class=\"col-md-5 text-center\">' +\r\n                    '<h3 class=\"table-title\">Saldo: S/. '+ saldo + '</h3>' +\r\n                    '</div>' +\r\n                    '<div class=\"col-md-4\">' +\r\n                        '<div class=\"pull-right btn-group table-botones\">' +\r\n                            '<a class=\"btn sbold white caja-cerrar\" href=\"#\" data-id=\"'+id+'\"> Cerrar </a>' +\r\n                            '<a class=\"btn sbold blue-soft\" href=\"'+create+'\" data-target=\"#ajax\" data-toggle=\"modal\"> Agregar nuevo flujo de caja <i class=\"fa fa-plus\"></i></a>' +\r\n                        '</div>' +\r\n                    '</div>' +\r\n                '</div>' +\r\n                '<table id=\"caja-lista-'+id+'\" class=\"table table-striped table-bordered table-hover order-column\">' +\r\n                '<thead>' +\r\n                '<tr role=\"row\" class=\"heading\">' +\r\n                '<td>Fecha</td>' +\r\n                '<td>Referencia</td>' +\r\n                '<td>Monto</td>' +\r\n                '<td>Moneda</td>' +\r\n                '<td>Tipo</td>' +\r\n                '<td>Acciones</td>' +\r\n                '</tr>' +\r\n                '</thead>' +\r\n                '<tbody>' +\r\n                '</tbody>' +\r\n                '</table>' +\r\n                '</td></tr>';\r\n\r\n            $(\"#exp-\" + id).after(html);\r\n            $(\"#caja-\" + id).fadeIn();\r\n\r\n            var tr;\r\n            $.each(JSON.parse(result), function(idx, obj) {\r\n                tr = $('<tr id=\"caja-select-'+ obj.id +'\">');\r\n                tr.append('<td>'+ obj.fecha_caja +'</td>');\r\n                tr.append('<td>'+ obj.referencia +'</td>');\r\n                tr.append('<td>'+ obj.monto +'</td>');\r\n                tr.append('<td>'+ obj.moneda +'</td>');\r\n                tr.append('<td>'+ obj.tipo +'</td>');\r\n                tr.append('<td><a href=\"'+ obj.url_editar +'\" data-target=\"#ajax\" data-toggle=\"modal\">Editar</a></td>');\r\n                $(\"#caja-lista-\"+id+\" tbody\").prepend(tr);\r\n            });\r\n\r\n            $(\".caja-cerrar\").on(\"click\", function (e) {\r\n                e.preventDefault();\r\n                var id = $(this).data('id');\r\n                $(\"#caja-\" + id).fadeOut();\r\n            });\r\n        },\r\n        beforeSend: function () { $('.progress').show(); },\r\n        complete: function () { $('.progress').hide(); },\r\n        error: function() {\r\n\r\n        }\r\n    });\r\n\r\n});\r\n\r\n\r\n//MOSTRAR INTERVINIENTES DE EXPEDIENTE\r\n$(\".expediente-interviniente\").on(\"click\", function(e) {\r\n    e.preventDefault();\r\n\r\n    var id = $(this).data('id');\r\n    var list = $(this).data('list');\r\n    var create = $(this).data('create');\r\n\r\n    $.ajax({\r\n        url: list,\r\n        type: 'GET',\r\n        success: function(result){\r\n            var html = '<tr id=\"interviniente-'+id+'\" class=\"bg-default\" style=\"display:none;\"><td style=\"padding:20px 15px;\" colspan=\"23\">' +\r\n                '<div class=\"btn-group pull-left\">' +\r\n                '<h3 class=\"table-title\">Intervinientes</h3>' +\r\n                '</div>' +\r\n                '<div class=\"btn-group pull-right table-botones\">' +\r\n                '<a class=\"btn sbold white interviniente-cerrar\" href=\"#\" data-id=\"'+id+'\"> Cerrar </a>' +\r\n                '<a class=\"btn sbold blue-soft\" href=\"'+create+'\" data-target=\"#ajax\" data-toggle=\"modal\"> Agregar nuevo interviniente <i class=\"fa fa-plus\"></i></a>' +\r\n                '</div>' +\r\n                '<table id=\"interviniente-lista-'+id+'\" class=\"table table-striped table-bordered table-hover order-column\">' +\r\n                '<thead>' +\r\n                '<tr role=\"row\" class=\"heading\">' +\r\n                '<td>Nombre</td>' +\r\n                '<td>Tipo</td>' +\r\n                '<td>DNI</td>' +\r\n                '<td>Teléfono</td>' +\r\n                '<td>Celular</td>' +\r\n                '<td>Email</td>' +\r\n                '<td>Acciones</td>' +\r\n                '</tr>' +\r\n                '</thead>' +\r\n                '<tbody>' +\r\n                '</tbody>' +\r\n                '</table>' +\r\n                '</td></tr>';\r\n\r\n            $(\"#exp-\" + id).after(html);\r\n            $(\"#interviniente-\" + id).fadeIn();\r\n\r\n            var tr;\r\n            $.each(JSON.parse(result), function(idx, obj) {\r\n                tr = $('<tr id=\"interviniente-select-'+ obj.id +'\">');\r\n                tr.append('<td>'+ obj.nombre +'</td>');\r\n                tr.append('<td>'+ obj.tipo +'</td>');\r\n                tr.append('<td>'+ obj.dni +'</td>');\r\n                tr.append('<td>'+ obj.telefono +'</td>');\r\n                tr.append('<td>'+ obj.celular +'</td>');\r\n                tr.append('<td>'+ obj.email +'</td>');\r\n                tr.append('<td><a href=\"'+ obj.url_editar +'\" data-target=\"#ajax\" data-toggle=\"modal\">Editar</a></td>');\r\n                $(\"#interviniente-lista-\"+id+\" tbody\").prepend(tr);\r\n            });\r\n\r\n            $(\".interviniente-cerrar\").on(\"click\", function (e) {\r\n                e.preventDefault();\r\n                var id = $(this).data('id');\r\n                $(\"#interviniente-\" + id).fadeOut();\r\n            });\r\n        },\r\n        beforeSend: function () { $('.progress').show(); },\r\n        complete: function () { $('.progress').hide(); },\r\n        error: function(result) {\r\n            console.log()\r\n        }\r\n    });\r\n\r\n});\r\n\r\n\r\n//MOSTRAR DOCUMENTOS DE EXPEDIENTE\r\n$(\".expediente-documento\").on(\"click\", function(e) {\r\n    e.preventDefault();\r\n\r\n    var id = $(this).data('id');\r\n    var list = $(this).data('list');\r\n    var create = $(this).data('create');\r\n\r\n    $.ajax({\r\n        url: list,\r\n        type: 'GET',\r\n        success: function(result){\r\n            var html = '<tr id=\"documento-'+id+'\" class=\"bg-default\" style=\"display:none;\"><td style=\"padding:20px 15px;\" colspan=\"23\">' +\r\n                '<div class=\"btn-group pull-left\">' +\r\n                '<h3 class=\"table-title\">Documentos</h3>' +\r\n                '</div>' +\r\n                '<div class=\"btn-group pull-right table-botones\">' +\r\n                '<a class=\"btn sbold white documento-cerrar\" href=\"#\" data-id=\"'+id+'\"> Cerrar </a>' +\r\n                '<a class=\"btn sbold blue-soft\" href=\"'+create+'\" data-target=\"#ajax\" data-toggle=\"modal\"> Agregar nuevo documento <i class=\"fa fa-plus\"></i></a>' +\r\n                '</div>' +\r\n                '<table id=\"documento-lista-'+id+'\" class=\"table table-striped table-bordered table-hover order-column\">' +\r\n                '<thead>' +\r\n                '<tr role=\"row\" class=\"heading\">' +\r\n                '<td>Referencia</td>' +\r\n                '<td>Descripción</td>' +\r\n                '<td>Documento</td>' +\r\n                '<td>Acciones</td>' +\r\n                '</tr>' +\r\n                '</thead>' +\r\n                '<tbody>' +\r\n                '</tbody>' +\r\n                '</table>' +\r\n                '</td></tr>';\r\n\r\n            $(\"#exp-\" + id).after(html);\r\n            $(\"#documento-\" + id).fadeIn();\r\n\r\n            var tr;\r\n            $.each(JSON.parse(result), function(idx, obj) {\r\n                tr = $('<tr id=\"documento-select-'+ obj.id +'\">');\r\n                tr.append('<td>'+ obj.titulo +'</td>');\r\n                tr.append('<td>'+ obj.descripcion +'</td>');\r\n                tr.append('<td class=\"text-center\"><a href=\"'+ obj.descargar +'\">Descargar</a></td>');\r\n                tr.append('<td><a href=\"'+ obj.url_editar +'\" data-target=\"#ajax\" data-toggle=\"modal\">Editar</a></td>');\r\n                $(\"#documento-lista-\"+id+\" tbody\").prepend(tr);\r\n            });\r\n\r\n            $(\".documento-cerrar\").on(\"click\", function (e) {\r\n                e.preventDefault();\r\n                var id = $(this).data('id');\r\n                $(\"#documento-\" + id).fadeOut();\r\n            });\r\n        },\r\n        beforeSend: function () { $('.progress').show(); },\r\n        complete: function () { $('.progress').hide(); },\r\n        error: function(result) {\r\n            console.log(result)\r\n        }\r\n    });\r\n\r\n});\r\n\r\n\r\n//MOSTRAR COMPROBANTES DE PAGO DE EXPEDIENTE\r\n$(\".expediente-comprobantes\").on(\"click\", function(e) {\r\n    e.preventDefault();\r\n\r\n    var id = $(this).data('id');\r\n    var list = $(this).data('list');\r\n    var create = $(this).data('create');\r\n\r\n    $.ajax({\r\n        url: list,\r\n        type: 'GET',\r\n        success: function(result){\r\n            console.log(result);\r\n            var html = '<tr id=\"comprobante-'+id+'\" class=\"bg-default\" style=\"display:none;\"><td style=\"padding:20px 15px;\" colspan=\"23\">' +\r\n                '<div class=\"btn-group pull-left\">' +\r\n                '<h3 class=\"table-title\">Comprobantes de Pago</h3>' +\r\n                '</div>' +\r\n                '<div class=\"btn-group pull-right table-botones\">' +\r\n                '<a class=\"btn sbold white comprobante-cerrar\" href=\"#\" data-id=\"'+id+'\"> Cerrar </a>' +\r\n                '</div>' +\r\n                '<table id=\"comprobante-lista-'+id+'\" class=\"table table-striped table-bordered table-hover order-column\">' +\r\n                '<thead>' +\r\n                '<tr role=\"row\" class=\"heading\">' +\r\n                    '<td>Tipo de Comprobante</td>' +\r\n                    '<td>N° de Comprobante</td>' +\r\n                    '<td>Fecha</td>' +\r\n                    '<td>Moneda</td>' +\r\n                    '<td>Importe</td>' +\r\n                    '<td>Documento</td>' +\r\n                '</tr>' +\r\n                '</thead>' +\r\n                '<tbody>' +\r\n                '</tbody>' +\r\n                '</table>' +\r\n                '</td></tr>';\r\n\r\n            $(\"#exp-\" + id).after(html);\r\n            $(\"#comprobante-\" + id).fadeIn();\r\n\r\n            var tr;\r\n            $.each(JSON.parse(result), function(idx, obj) {\r\n                tr = $('<tr id=\"comprobante-select-'+ obj.id +'\">');\r\n                tr.append('<td>'+ obj.tipo_comprobante +'</td>');\r\n                tr.append('<td>'+ obj.comprobante_numero +'</td>');\r\n                tr.append('<td>'+ obj.fecha +'</td>');\r\n                tr.append('<td>'+ obj.moneda +'</td>');\r\n                tr.append('<td>'+ obj.importe +'</td>');\r\n                tr.append('<td class=\"text-center\"><a href=\"'+ obj.url_descargar +'\">Descargar</a></td>');\r\n                $(\"#comprobante-lista-\"+id+\" tbody\").prepend(tr);\r\n            });\r\n\r\n            $(\".comprobante-cerrar\").on(\"click\", function (e) {\r\n                e.preventDefault();\r\n                var id = $(this).data('id');\r\n                $(\"#comprobante-\" + id).fadeOut();\r\n            });\r\n        },\r\n        beforeSend: function () { $('.progress').show(); },\r\n        complete: function () { $('.progress').hide(); },\r\n        error: function(result) {\r\n            console.log(result)\r\n        }\r\n    });\r\n\r\n});\r\n\r\n\r\n//ANULAR EXPEDIENTES\r\n$(\".expediente-anulado\").on(\"click\", function (e) {\r\n    e.preventDefault();\r\n\r\n    var id = $(this).data('id');\r\n    var url = $(this).data('anular');\r\n    var title = $(this).data('title');\r\n\r\n    bootbox.dialog({\r\n        title: 'Anular registro',\r\n        message: '\\<\\strong\\>\\Desea anular el expediente:\\</\\strong\\>\\ '+ title,\r\n        closeButton: false,\r\n        buttons: {\r\n            cancel: {\r\n                label: 'Cancelar',\r\n                className: 'default'\r\n            },\r\n            success: {\r\n                label: 'Anular',\r\n                className: 'red',\r\n                callback: function() {\r\n                    $.ajax({\r\n                        url: url,\r\n                        type: 'POST',\r\n                        headers: { 'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content') },\r\n                        beforeSend: function () { $('.progress').show(); },\r\n                        complete: function () { $('.progress').hide(); },\r\n                        success: function (result) {\r\n                            $(\"#exp-\" + id + \" .btn-group button i.fa\").remove();\r\n                            $(\"#exp-\" + id + \" .btn-group .dropdown-menu\").remove();\r\n                            $(\"#exp-\" + id).addClass('danger');\r\n                            $(\"#exp-\" + id + \" .btn-group button\").removeClass('blue').addClass('red').text('Anulado');\r\n                        },\r\n                        error: function (result) {\r\n                            $(\"#mensajeAjax\").show();\r\n                            $(\"#mensajeAjax .alert\").show().removeClass('alert-success').addClass('alert-danger');\r\n                            $(\"#mensajeAjax span\").text(\"Se produjo un error al eliminar el registro\");\r\n                            $(\".accion-select-\"+ accion).show();\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    });\r\n});\r\n\r\n"]}